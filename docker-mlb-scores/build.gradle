apply plugin: 'docker'

buildscript {
    repositories { jcenter() }
    dependencies {
        classpath 'se.transmode.gradle:gradle-docker:1.2'
    }
}

group = "creg.tom-adams.net:5000"

task copyImageFiles(type: Copy) {
    from '.'
    into 'build/docker'
    include '*.sh'
    include 'mlb-scores*.jar'
}

task dockerBuild(type: Docker) {
    dependsOn copyImageFiles
    applicationName = "mlb-scores"
    dockerfile = file('Dockerfile')
    tagVersion = System.getenv("BUILD_NUMBER") ?: "0"
    println "*** created docker image ${project.group}/${applicationName}:${tagVersion}"
}
